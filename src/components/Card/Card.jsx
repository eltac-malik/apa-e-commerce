import React,{useState} from 'react'
import Modal from 'components/Modal/Modal'
import {useNavigate} from 'react-router-dom'
import {useDispatch,useSelector} from 'react-redux'
import {setProducts} from 'redux/productSlice'
import {setBasket} from 'redux/basketSlice'
import {setWish} from 'redux/wishSlice'

function Card({prod,setFaster,faster}) {

  const [open, setOpen] = React.useState(false);
  const handleOpen = () => setOpen(true);
  const navigate = useNavigate()
  const dispath = useDispatch()

  const handleNavigate = (e)=>
  {
    navigate(`/detail/${prod.id}`)
    e.stopPropagation()
  }

    return (
        <div className="card">
          <Modal open={open} prod={prod} setOpen={setOpen}/>
          {
            prod.isDiscount&&
        <div className="discount">
        <svg
          width="60"
          height="60"
          viewBox="0 0 60 57"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <g filter="url(#filter0_d_604_7770)">
            <path
              d="M0.000976562 28.5C0.000976562 25.4692 3.61665 23.0233 4.46739 20.2584C5.37131 17.4403 3.93568 13.3461 5.69034 10.9533C7.445 8.56061 11.7519 8.66695 14.1446 6.96546C16.5373 5.26397 17.7071 1.06341 20.5784 0.159495C23.2901 -0.691251 26.7463 1.91416 29.7771 1.91416C32.8079 1.91416 36.264 -0.691251 38.9758 0.159495C41.7939 1.06341 43.0168 5.26397 45.4095 6.96546C47.8023 8.72012 52.1092 8.56061 53.8638 10.9533C55.5653 13.3461 54.1297 17.3871 55.0868 20.2584C55.9907 23.0233 59.5532 25.416 59.5532 28.5C59.5532 31.5307 55.9375 33.9766 55.0868 36.7416C54.1828 39.5597 55.6185 43.6539 53.8638 46.0466C52.1092 48.3861 47.8023 48.2798 45.4095 50.0345C43.0168 51.736 41.847 55.9365 38.9758 56.8404C36.2108 57.7443 32.8079 55.0858 29.7771 55.0858C26.7463 55.0858 23.2901 57.6912 20.5784 56.8404C17.7603 55.9365 16.5373 51.736 14.1446 50.0345C11.7519 48.2798 7.445 48.4393 5.69034 46.0466C3.98885 43.6539 5.42448 39.6128 4.46739 36.7416C3.61665 33.9766 0.000976562 31.5307 0.000976562 28.5Z"
              fill="#FF0000"
            />
          </g>
          <g filter="url(#filter1_d_604_7770)">
            <path
              d="M15.9273 20.414C17.7032 20.414 19.008 20.7885 19.8416 21.5375C20.6873 22.2745 21.1101 23.247 21.1101 24.4551C21.1101 25.2524 20.8987 25.9894 20.4758 26.6659C20.0651 27.3304 19.4248 27.874 18.5549 28.2969C17.6851 28.7076 16.6039 28.913 15.3112 28.913C14.4172 28.913 13.5232 28.8163 12.6292 28.623C11.7473 28.4297 10.9741 28.1458 10.3096 27.7713L11.7594 24.6182C12.2909 24.9202 12.8466 25.1497 13.4265 25.3068C14.0185 25.4639 14.5924 25.5424 15.1481 25.5424C15.6434 25.5424 16.0421 25.4578 16.3441 25.2887C16.6582 25.1075 16.8153 24.8598 16.8153 24.5457C16.8153 24.2437 16.6763 24.0202 16.3985 23.8752C16.1206 23.7181 15.6192 23.6396 14.8944 23.6396H11.2157L11.85 15.9379H20.2765V19.1636H15.3655L15.2749 20.414H15.9273ZM27.7089 28.913C26.5854 28.913 25.5887 28.6532 24.7188 28.1338C23.8611 27.6022 23.1845 26.8411 22.6892 25.8504C22.206 24.8477 21.9644 23.6577 21.9644 22.2805C21.9644 20.9033 22.206 19.7193 22.6892 18.7287C23.1845 17.7259 23.8611 16.9648 24.7188 16.4453C25.5887 15.9138 26.5854 15.648 27.7089 15.648C28.8324 15.648 29.8231 15.9138 30.6808 16.4453C31.5507 16.9648 32.2272 17.7259 32.7105 18.7287C33.2058 19.7193 33.4534 20.9033 33.4534 22.2805C33.4534 23.6577 33.2058 24.8477 32.7105 25.8504C32.2272 26.8411 31.5507 27.6022 30.6808 28.1338C29.8231 28.6532 28.8324 28.913 27.7089 28.913ZM27.7089 25.488C28.6754 25.488 29.1586 24.4188 29.1586 22.2805C29.1586 20.1421 28.6754 19.073 27.7089 19.073C26.7424 19.073 26.2592 20.1421 26.2592 22.2805C26.2592 24.4188 26.7424 25.488 27.7089 25.488ZM37.6465 22.8241C36.6558 22.8241 35.8464 22.51 35.2182 21.8818C34.59 21.2536 34.2758 20.3898 34.2758 19.2904C34.2758 18.5535 34.4208 17.9192 34.7108 17.3877C35.0007 16.8561 35.3994 16.4514 35.9068 16.1735C36.4263 15.8957 37.0062 15.7567 37.6465 15.7567C38.2868 15.7567 38.8606 15.8957 39.368 16.1735C39.8875 16.4514 40.2922 16.8561 40.5822 17.3877C40.8721 17.9192 41.0171 18.5535 41.0171 19.2904C41.0171 20.3898 40.703 21.2536 40.0748 21.8818C39.4465 22.51 38.6371 22.8241 37.6465 22.8241ZM45.0944 15.9379H48.157L39.4949 28.623H36.4323L45.0944 15.9379ZM37.6465 20.867C37.876 20.867 38.0633 20.7462 38.2082 20.5046C38.3653 20.2509 38.4438 19.8462 38.4438 19.2904C38.4438 18.7347 38.3653 18.336 38.2082 18.0944C38.0633 17.8407 37.876 17.7139 37.6465 17.7139C37.4169 17.7139 37.2236 17.8407 37.0666 18.0944C36.9216 18.336 36.8491 18.7347 36.8491 19.2904C36.8491 19.8462 36.9216 20.2509 37.0666 20.5046C37.2236 20.7462 37.4169 20.867 37.6465 20.867ZM46.9428 28.8043C45.9522 28.8043 45.1428 28.4902 44.5145 27.8619C43.8863 27.2337 43.5722 26.3699 43.5722 25.2706C43.5722 24.5336 43.7172 23.8994 44.0071 23.3678C44.2971 22.8362 44.6958 22.4315 45.2032 22.1536C45.7226 21.8758 46.3025 21.7368 46.9428 21.7368C47.5831 21.7368 48.157 21.8758 48.6644 22.1536C49.1839 22.4315 49.5886 22.8362 49.8785 23.3678C50.1685 23.8994 50.3134 24.5336 50.3134 25.2706C50.3134 26.3699 49.9993 27.2337 49.3711 27.8619C48.7429 28.4902 47.9335 28.8043 46.9428 28.8043ZM46.9428 26.8471C47.1724 26.8471 47.3596 26.7263 47.5046 26.4847C47.6617 26.231 47.7402 25.8263 47.7402 25.2706C47.7402 24.7148 47.6617 24.3162 47.5046 24.0745C47.3596 23.8208 47.1724 23.694 46.9428 23.694C46.7133 23.694 46.52 23.8208 46.3629 24.0745C46.218 24.3162 46.1455 24.7148 46.1455 25.2706C46.1455 25.8263 46.218 26.231 46.3629 26.4847C46.52 26.7263 46.7133 26.8471 46.9428 26.8471Z"
              fill="white"
            />
          </g>
          <g filter="url(#filter2_d_604_7770)">
            <path
              d="M10.598 34.8911H12.5815V40.7744H10.598V34.8911ZM11.5897 34.4961C11.3096 34.4961 11.0799 34.4065 10.9006 34.2272C10.7213 34.0479 10.6316 33.8181 10.6316 33.538C10.6316 33.2578 10.7213 33.0281 10.9006 32.8488C11.0799 32.6695 11.3096 32.5799 11.5897 32.5799C11.8699 32.5799 12.0996 32.6695 12.2789 32.8488C12.4582 33.0281 12.5479 33.2578 12.5479 33.538C12.5479 33.8181 12.4582 34.0479 12.2789 34.2272C12.0996 34.4065 11.8699 34.4961 11.5897 34.4961ZM19.8398 34.8911V40.7744H18.2093L15.9737 38.1017V40.7744H14.0406V34.8911H15.6711L17.9068 37.5638V34.8911H19.8398ZM21.2998 34.8911H24.1994C24.855 34.8911 25.4321 35.0116 25.9308 35.2525C26.4351 35.4879 26.8245 35.8269 27.0991 36.2695C27.3792 36.7122 27.5193 37.2332 27.5193 37.8328C27.5193 38.4323 27.3792 38.9534 27.0991 39.396C26.8245 39.8387 26.4351 40.1805 25.9308 40.4214C25.4321 40.6567 24.855 40.7744 24.1994 40.7744H21.2998V34.8911ZM24.1154 39.228C24.5412 39.228 24.8802 39.1075 25.1324 38.8666C25.3901 38.62 25.519 38.2754 25.519 37.8328C25.519 37.3901 25.3901 37.0483 25.1324 36.8074C24.8802 36.5609 24.5412 36.4376 24.1154 36.4376H23.2833V39.228H24.1154ZM28.7478 34.8911H30.7313V40.7744H28.7478V34.8911ZM29.7396 34.4961C29.4594 34.4961 29.2297 34.4065 29.0504 34.2272C28.8711 34.0479 28.7814 33.8181 28.7814 33.538C28.7814 33.2578 28.8711 33.0281 29.0504 32.8488C29.2297 32.6695 29.4594 32.5799 29.7396 32.5799C30.0197 32.5799 30.2494 32.6695 30.4287 32.8488C30.608 33.0281 30.6977 33.2578 30.6977 33.538C30.6977 33.8181 30.608 34.0479 30.4287 34.2272C30.2494 34.4065 30.0197 34.4961 29.7396 34.4961ZM34.7118 39.2952H34.1739V40.7744H32.1904V34.8911H35.0228C35.5663 34.8911 36.0398 34.9808 36.4432 35.1601C36.8466 35.3394 37.1576 35.5971 37.3761 35.9333C37.5946 36.2695 37.7039 36.6617 37.7039 37.11C37.7039 37.5302 37.6087 37.8972 37.4182 38.211C37.2276 38.5248 36.9531 38.7741 36.5945 38.959L37.83 40.7744H35.712L34.7118 39.2952ZM35.7036 37.11C35.7036 36.8915 35.6364 36.7234 35.5019 36.6057C35.3674 36.4824 35.1657 36.4208 34.8967 36.4208H34.1739V37.7992H34.8967C35.1657 37.7992 35.3674 37.7403 35.5019 37.6227C35.6364 37.4994 35.7036 37.3285 35.7036 37.11ZM38.9572 34.8911H40.9407V40.7744H38.9572V34.8911ZM39.9489 34.4961C39.6688 34.4961 39.4391 34.4065 39.2598 34.2272C39.0805 34.0479 38.9908 33.8181 38.9908 33.538C38.9908 33.2578 39.0805 33.0281 39.2598 32.8488C39.4391 32.6695 39.6688 32.5799 39.9489 32.5799C40.2291 32.5799 40.4588 32.6695 40.6381 32.8488C40.8174 33.0281 40.9071 33.2578 40.9071 33.538C40.9071 33.8181 40.8174 34.0479 40.6381 34.2272C40.4588 34.4065 40.2291 34.4961 39.9489 34.4961ZM47.6527 40.7744L47.6359 38.0933L46.3584 40.2449H45.4843L44.2068 38.1858V40.7744H42.3998V34.8911H44.0303L45.9466 38.0261L47.8124 34.8911H49.4429L49.4597 40.7744H47.6527Z"
              fill="white"
            />
          </g>
          <defs>
            <filter
              id="filter0_d_604_7770"
              x="-9.99902"
              y="-8.01123"
              width="79.5518"
              height="77.0391"
              filterUnits="userSpaceOnUse"
              color-interpolation-filters="sRGB"
            >
              <feFlood flood-opacity="0" result="BackgroundImageFix" />
              <feColorMatrix
                in="SourceAlpha"
                type="matrix"
                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                result="hardAlpha"
              />
              <feOffset dy="2" />
              <feGaussianBlur stdDeviation="5" />
              <feComposite in2="hardAlpha" operator="out" />
              <feColorMatrix
                type="matrix"
                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"
              />
              <feBlend
                mode="normal"
                in2="BackgroundImageFix"
                result="effect1_dropShadow_604_7770"
              />
              <feBlend
                mode="normal"
                in="SourceGraphic"
                in2="effect1_dropShadow_604_7770"
                result="shape"
              />
            </filter>
            <filter
              id="filter1_d_604_7770"
              x="8.06051"
              y="15.6479"
              width="44.502"
              height="17.7633"
              filterUnits="userSpaceOnUse"
              color-interpolation-filters="sRGB"
            >
              <feFlood flood-opacity="0" result="BackgroundImageFix" />
              <feColorMatrix
                in="SourceAlpha"
                type="matrix"
                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                result="hardAlpha"
              />
              <feOffset dy="2.24906" />
              <feGaussianBlur stdDeviation="1.12453" />
              <feComposite in2="hardAlpha" operator="out" />
              <feColorMatrix
                type="matrix"
                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"
              />
              <feBlend
                mode="normal"
                in2="BackgroundImageFix"
                result="effect1_dropShadow_604_7770"
              />
              <feBlend
                mode="normal"
                in="SourceGraphic"
                in2="effect1_dropShadow_604_7770"
                result="shape"
              />
            </filter>
            <filter
              id="filter2_d_604_7770"
              x="8.47079"
              y="32.5798"
              width="43.116"
              height="12.4483"
              filterUnits="userSpaceOnUse"
              color-interpolation-filters="sRGB"
            >
              <feFlood flood-opacity="0" result="BackgroundImageFix" />
              <feColorMatrix
                in="SourceAlpha"
                type="matrix"
                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                result="hardAlpha"
              />
              <feOffset dy="2.12686" />
              <feGaussianBlur stdDeviation="1.06343" />
              <feComposite in2="hardAlpha" operator="out" />
              <feColorMatrix
                type="matrix"
                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"
              />
              <feBlend
                mode="normal"
                in2="BackgroundImageFix"
                result="effect1_dropShadow_604_7770"
              />
              <feBlend
                mode="normal"
                in="SourceGraphic"
                in2="effect1_dropShadow_604_7770"
                result="shape"
              />
            </filter>
          </defs>
        </svg>
      </div>
          }
        <div className="wish" onClick={()=> {
          setFaster(faster+1)
          dispath(setWish(prod))}}>
          {
            prod.isFav?<i class="fa-solid fa-sol-heart fa-heart"></i>: <i class="bi bi-heart"></i>
          }
         
        </div>
       
        <div className="prod-img" onClick={handleOpen}>
          <figure>
            <img
            src={prod.img}
            />
          </figure>
        </div>

        <div className="sizes">
              {
                prod.size.map(e=> <span>{e.toUpperCase()}</span>)
              }
              
        </div>


        <div onClick={()=> handleNavigate()} className="prod-content">
            <p className='prod-title'>{prod.name}</p>
            <div className="stars">
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            <i class="fa-solid fa-star"></i>
            </div>
            <p className='prod-about'>{(prod.subtitle).slice(0,25)}....</p>
            <p className='prod-price'>
                <span className='pure-p'>{prod.price} AZN</span>
                <span className='dis-p'>{prod.disPrice} AZN</span>
            </p>
            <div className="add-cart" onClick={(e)=>
            {
              e.stopPropagation()
              dispath(setBasket(prod.id))
            }}>Sebete ekle</div>
        </div>
      </div>
    )
}

export default Card
